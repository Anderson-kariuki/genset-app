<ion-header [translucent]="true" style="background-color: transparent;">
  <!-- client dashboardpage toolbar, also repeated in the other pages apart frome the home page -->
  <ion-toolbar>
    <div class="component-1" style="background-color:#ffffff;">
      <!-- take note of the click events of the various button  -->
      <img src="assets/lectrotel_logo.png" alt="Logo">
      <button id="dataLoading" (click)="goToHome()" style="padding-left: 10px; padding-right: 10px; background-color:#ffffff;">
        <ion-icon name="person" style="color: black;"></ion-icon>
      </button>
      <button id="dataLoading" (click)="goToDashboard()" style="padding-left: 10px; padding-right: 10px; background-color:#ffffff;">
        <ion-icon name="home" style="color: black;"></ion-icon></button>
      <button id="dataLoading" class="right-aligned" (click)="goToMenu()">
        <ion-icon name="list" class="dash" style="color: black;"></ion-icon>
      </button>
    </div>

  </ion-toolbar>
</ion-header>

<ion-content style="position: relative;">
  <!-- only show the popup card if the showDashboard value in 1  -->
  <ion-card class="popup" *ngIf="showDashboard">
    <ion-card-header>
      <!-- this part shows the username and email of the logged account on the popup list display -->
      <ion-card-title class="text-1">{{data.uName}}</ion-card-title>
      <ion-card-subtitle class="text-26">{{data.mail}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <!-- take note of the click events of the various button  -->
        <ion-item id="dataLoading" (click)="onDashboardClick()">
          <ion-icon name="mail"></ion-icon>
          <ion-label class="text-2">Dashboard</ion-label>
        </ion-item>

        <ion-item id="dataLoading" (click)="onDetailsClick()">
          <ion-icon name="expand"></ion-icon>
          <ion-label class="text-2">Details</ion-label>
        </ion-item>

        <ion-item id="dataLoading" (click)="onAlertsClick()">
          <ion-icon name="alert-circle"></ion-icon>
          <ion-label class="text-2">Alerts</ion-label>
        </ion-item>

        <ion-item id="dataLoading" lines="none" (click)="onLogoutClick()">
          <ion-icon name="log-out"></ion-icon>
          <ion-label class="text-2">Logout</ion-label>
        </ion-item>
      </ion-list>
      <div class="line-2"></div>
    </ion-card-content>
  </ion-card>

  <div class="ion-padding" style="background-color: #ffffff;">
    <div style="position: relative; background-color: #f6f6f6;">
      <ion-select class="ion-padding" justify="start" label="Select Genset" label-placement="floating" (ionChange)="handleChange($event)">
        <div *ngFor="let gens of genNames">
          <ion-select-option value= {{gens.generator_id}} >{{gens.generator_name}}</ion-select-option>
        </div>
      </ion-select>

      <!-- <div *ngIf="dataLoading" class="text-center">
        <c-card class="">
          <c-card-body class="">
            <span>
              Loading
              <c-spinner aria-hidden="true" size="sm" variant="grow"></c-spinner>
              <c-spinner aria-hidden="true" size="sm" variant="grow"></c-spinner>
              <c-spinner aria-hidden="true" size="sm" variant="grow"></c-spinner>
              
            </span>
          </c-card-body>
        </c-card>    
      </div> -->
    
      <!-- <div *ngIf="!dataLoading"> -->
      <ion-item-group>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Bulk Tank Fuel Level</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item lines="none">
                <ion-thumbnail>
                  <img alt="fuel level" src="assets/round_bar.png" />
                </ion-thumbnail>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValueBulk}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Day Tank Fuel</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item lines="none">
                <ion-thumbnail>
                  <img alt="fuel level" src="assets/round_bar.png" />
                </ion-thumbnail>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValueBulkDay}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Engine Speed</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item lines="none">
                <ion-thumbnail>
                  <img alt="speed" src="assets/round_bar.png" />
                </ion-thumbnail>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValue}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Coolant Temperature</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item lines="none">
                <ion-thumbnail class="bar">
                  <img alt="coolant temperature" src="assets/straight_bar.png" />
                </ion-thumbnail>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValueTemp}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Battery Voltage</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item lines="none">
                <ion-thumbnail class="bar">
                  <img alt="battery voltage" src="assets/straight_bar.png" />
                </ion-thumbnail>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValueBatt}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col  size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Operation Mode</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-button color="light" lines="none" class=" text-2"> {{operation_mode}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">GenSet State</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-button color="light" lines="none" class=" text-2"> {{genState}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid>
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">E-Stop Status</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-button color="light" lines="none" class=" text-2"> {{e_stop_status}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Active Fault Type</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-button color="light" lines="none" class=" text-2"> {{active_fault_type}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Active Fault Code</ion-label>
              </ion-item>
            </ion-col>
            <ion-col >
              <ion-button color="light" lines="none" class=" text-2"> {{active_fault_code}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid [fixed]="true">
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Number of Starts</ion-label>
              </ion-item>
            </ion-col>
            <ion-col >
              <ion-button color="light" lines="none" class=" text-2"> {{n0_of_starts}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid>
          <ion-row>
            <ion-col size="6">
              <ion-item lines="none">
                <ion-label class="text-2">Frequency</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-button color="light" lines="none" class=" text-2"> {{gaugeValueFrequency}} </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item-group>
    </div>
  </div>
</ion-content>

<ion-loading trigger="dataLoading" message="Loading..." [duration]="2000" name="dots"></ion-loading>